{
    "componentChunkName": "component---src-templates-tut-template-tsx",
    "path": "/tutorials/v3/node-metrics/",
    "result": {"data":{"mdx":{"frontmatter":{"slug":"/tutorials/v3/node-metrics","title":"Visualizing Node Metrics","hideNav":true,"difficulty":1,"duration":"< 1 Hour","relevantSkills":["Prometheus","Data Visualization"],"section":"tutorials","category":"node metrics"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Visualizing Node Metrics\",\n  \"slug\": \"/tutorials/v3/node-metrics\",\n  \"version\": 3,\n  \"section\": \"tutorials\",\n  \"hideNav\": true,\n  \"category\": \"node metrics\",\n  \"keywords\": \"telemetry, metrics\",\n  \"difficulty\": 1,\n  \"duration\": \"< 1 Hour\",\n  \"relevantSkills\": [\"Prometheus\", \"Data Visualization\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Message = makeShortcode(\"Message\");\nvar TutorialObjective = makeShortcode(\"TutorialObjective\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"introduction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#introduction\",\n    \"aria-label\": \"introduction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Introduction\"), mdx(\"p\", null, \"Recent versions of Substrate expose metrics, such as how many peers your node is connected to, how\\nmuch memory your node is using, etc. To visualize these metrics, you can use tools like\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://prometheus.io/\"\n  }, \"Prometheus\"), \" and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://grafana.com/\"\n  }, \"Grafana\"), \". In this tutorial you will\\nlearn how to use Grafana and Prometheus to scrape and visualize node metrics.\"), mdx(Message, {\n    type: \"gray\",\n    title: \"Note\",\n    text: \"In the past Substrate exposed a Grafana JSON endpoint directly. This has been replaced with a Prometheus metric endpoint.\",\n    mdxType: \"Message\"\n  }), mdx(\"p\", null, \"A possible architecture could look like:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"+-----------+                     +-------------+                                                              +---------+\\n| Substrate |                     | Prometheus  |                                                              | Grafana |\\n+-----------+                     +-------------+                                                              +---------+\\n      |               -----------------\\\\ |                                                                          |\\n      |               | Every 1 minute |-|                                                                          |\\n      |               |----------------| |                                                                          |\\n      |                                  |                                                                          |\\n      |        GET current metric values |                                                                          |\\n      |<---------------------------------|                                                                          |\\n      |                                  |                                                                          |\\n      | `substrate_peers_count 5`        |                                                                          |\\n      |--------------------------------->|                                                                          |\\n      |                                  | --------------------------------------------------------------------\\\\    |\\n      |                                  |-| Save metric value with corresponding time stamp in local database |    |\\n      |                                  | |-------------------------------------------------------------------|    |\\n      |                                  |                                         -------------------------------\\\\ |\\n      |                                  |                                         | Every time user opens graphs |-|\\n      |                                  |                                         |------------------------------| |\\n      |                                  |                                                                          |\\n      |                                  |       GET values of metric `substrate_peers_count` from time-X to time-Y |\\n      |                                  |<-------------------------------------------------------------------------|\\n      |                                  |                                                                          |\\n      |                                  | `substrate_peers_count (1582023828, 5), (1582023847, 4) [...]`           |\\n      |                                  |------------------------------------------------------------------------->|\\n      |                                  |                                                                          |\\n\\n\")), mdx(\"details\", null, mdx(\"summary\", null, \"Reproduce diagram\"), mdx(\"p\", null, \"Go to: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://textart.io/sequence\"\n  }, \"https://textart.io/sequence\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"object Substrate Prometheus Grafana\\nnote left of Prometheus: Every 1 minute\\nPrometheus->Substrate: GET current metric values\\nSubstrate->Prometheus: `substrate_peers_count 5`\\nnote right of Prometheus: Save metric value with corresponding time stamp in local database\\nnote left of Grafana: Every time user opens graphs\\nGrafana->Prometheus: GET values of metric `substrate_peers_count` from time-X to time-Y\\nPrometheus->Grafana: `substrate_peers_count (1582023828, 5), (1582023847, 4) [...]`\\n\"))), mdx(\"h2\", {\n    \"id\": \"what-you-will-be-doing\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#what-you-will-be-doing\",\n    \"aria-label\": \"what you will be doing permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"What you will be doing\"), mdx(TutorialObjective, {\n    data: {\n      textLineOne: '1. Install Prometheus and Grafana',\n      url: '/tutorials/v3/node-metrics/#install-prometheus-and-grafana'\n    },\n    mdxType: \"TutorialObjective\"\n  }), mdx(TutorialObjective, {\n    data: {\n      textLineOne: '2. Configure Prometheus to scrape your Substrate node',\n      url: '/tutorials/v3/node-metrics#configure-prometheus-to-scrape-your-substrate-node'\n    },\n    mdxType: \"TutorialObjective\"\n  }), mdx(TutorialObjective, {\n    data: {\n      textLineOne: '3. Visualize Prometheus Metrics with Grafana',\n      url: '/tutorials/v3/node-metrics#visualizing-prometheus-metrics-with-grafana'\n    },\n    mdxType: \"TutorialObjective\"\n  }), mdx(\"h2\", {\n    \"id\": \"learning-outcomes\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#learning-outcomes\",\n    \"aria-label\": \"learning outcomes permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Learning outcomes\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Learn how to do a time-series scrape for a Substrate node using Prometheus\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Learn how to use Grafana and Prometheus to visualize node metrics\")), mdx(\"h2\", {\n    \"id\": \"install-prometheus-and-grafana\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#install-prometheus-and-grafana\",\n    \"aria-label\": \"install prometheus and grafana permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Install Prometheus and Grafana\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install Prometheus \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://prometheus.io/docs/prometheus/latest/installation/\"\n  }, \"here\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install Grafana \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://grafana.com/get\"\n  }, \"here\"), \".\")), mdx(Message, {\n    type: \"green\",\n    title: \"Advice\",\n    text: \"We suggest for _testing_ that you download the compiled `bin` programs for these apps as opposed to fully installing them or using them in docker. Just `download` for your architecture, and run it from the `working directory` that is convenient for you. The links above provide instruction on this, and this guide assume you do it this way. \",\n    mdxType: \"Message\"\n  }), mdx(\"h2\", {\n    \"id\": \"start-a-substrate-template-node\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#start-a-substrate-template-node\",\n    \"aria-label\": \"start a substrate template node permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Start a Substrate Template Node\"), mdx(Message, {\n    type: \"yellow\",\n    title: \"Information\",\n    text: \"Before you continue here, you should complete the [create your first substrate chain](/tutorials/v3/create-your-first-substrate-chain) tutorial. The same substrate version, conventions for  directory structure, and bin names are used here. You can of course use your own custom Substrate node instead of the template,  just edit the commands shown as needed. \",\n    mdxType: \"Message\"\n  }), mdx(\"p\", null, \"Substrate exposes an endpoint which serves metrics in the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://prometheus.io/docs/concepts/data_model/\"\n  }, \"Prometheus exposition\\nformat\"), \" available on port\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"9615\"), \". You can change the port with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--prometheus-port <PORT>\"), \" and enable it to\\nbe accessed over an interface other than local host with\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--prometheus-external\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"# clear the dev database\\n./target/release/node-template purge-chain --dev -y\\n# start the template node  in dev & tmp mode to experiment\\n# optionally add the `--prometheus-port <PORT>`\\n# or `--prometheus-external` flags\\n./target/release/node-template --dev --tmp\\n\")), mdx(\"h3\", {\n    \"id\": \"configure-prometheus-to-scrape-your-substrate-node\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#configure-prometheus-to-scrape-your-substrate-node\",\n    \"aria-label\": \"configure prometheus to scrape your substrate node permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Configure Prometheus to scrape your Substrate node\"), mdx(\"p\", null, \"In the working directory where you installed Prometheus, you will find a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prometheus.yml\"), \" configuration file.\\nLet's modify this (or create a custom new on) to configure Prometheus to scrape the exposed endpoint by adding\\nit to the targets array. If you modify the default, here is what will be different:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yml\"\n  }, \"# --snip--\\n\\n# A scrape configuration containing exactly one endpoint to scrape:\\n# Here it's Prometheus itself.\\nscrape_configs:\\n  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\\n  - job_name: 'substrate_node'\\n\\n    # metrics_path defaults to '/metrics'\\n    # scheme defaults to 'http'.\\n\\n    # Override the global default and scrape targets from this job every 5 seconds.\\n    # ** NOTE: you want to have this *LESS THAN* the block time in order to ensure\\n    # ** that you have a data point for every block!\\n    scrape_interval: 5s\\n\\n    static_configs:\\n      - targets: ['localhost:9615']\\n\")), mdx(\"br\", null), mdx(Message, {\n    type: \"gray\",\n    title: \"Note\",\n    text: \"You want to have `scrape_interval` _less than_ the block time in order to ensure that you have a data point for every block!\",\n    mdxType: \"Message\"\n  }), mdx(\"p\", null, \"Now we can start a Prometheus instance with the prometheus.yml config file. Presuming you downloaded the binary,\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cd\"), \" into the install directory and run:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"# specify a custom config file instead if you made one here:\\n./prometheus --config.file prometheus.yml\\n\")), mdx(\"p\", null, \"leave this process running.\"), mdx(\"h3\", {\n    \"id\": \"check-all-prometheus-metrics\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#check-all-prometheus-metrics\",\n    \"aria-label\": \"check all prometheus metrics permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Check All Prometheus Metrics\"), mdx(\"p\", null, \"In a new terminal, we can do a quick status check on prometheus:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl localhost:9615/metrics\\n\")), mdx(\"p\", null, \"Which should return a similar output to:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"# HELP substrate_block_height Block height info of the chain\\n# TYPE substrate_block_height gauge\\nsubstrate_block_height{status=\\\"best\\\"} 7\\nsubstrate_block_height{status=\\\"finalized\\\"} 4\\n# HELP substrate_build_info A metric with a constant '1' value labeled by name, version\\n# TYPE substrate_build_info gauge\\nsubstrate_build_info{name=\\\"available-vacation-6791\\\",version=\\\"2.0.0-4d97032-x86_64-linux-gnu\\\"} 1\\n# HELP substrate_database_cache_bytes RocksDB cache size in bytes\\n# TYPE substrate_database_cache_bytes gauge\\nsubstrate_database_cache_bytes 0\\n# HELP substrate_finality_grandpa_precommits_total Total number of GRANDPA precommits cast locally.\\n# TYPE substrate_finality_grandpa_precommits_total counter\\nsubstrate_finality_grandpa_precommits_total 31\\n# HELP substrate_finality_grandpa_prevotes_total Total number of GRANDPA prevotes cast locally.\\n# TYPE substrate_finality_grandpa_prevotes_total counter\\nsubstrate_finality_grandpa_prevotes_total 31\\n#\\n# --snip--\\n#\\n\")), mdx(\"p\", null, \"Alternatively in a browser open that same URL (http://localhost:9615/metrics) to view\\nall available metric data.\"), mdx(Message, {\n    type: \"green\",\n    title: \"Tip\",\n    text: \"Here you can see the `HELP` fields for each metric that is exposed for monitoring via Grafana.\",\n    mdxType: \"Message\"\n  }), mdx(\"h2\", {\n    \"id\": \"visualizing-prometheus-metrics-with-grafana\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#visualizing-prometheus-metrics-with-grafana\",\n    \"aria-label\": \"visualizing prometheus metrics with grafana permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Visualizing Prometheus Metrics with Grafana\"), mdx(\"p\", null, \"Once you have Grafana running, navigate to it in a browser (\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"the default is https://localhost:3000/\"), \").\\nLog in (default user \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \" and password \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \") and navigate to the data sources page at\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localhost:3000/datasources\"), \".\"), mdx(\"p\", null, \"You then need to select a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Prometheus\"), \" data source type and specify where Grafana needs to look for it.\"), mdx(Message, {\n    type: \"green\",\n    title: \"Tip\",\n    text: \"The Prometheus port Grafana needs is NOT the one you set in the `prometheus.yml` file (https://localhost:9615) for where your node is publishing it's data.\",\n    mdxType: \"Message\"\n  }), mdx(\"p\", null, \"With your substrate node and Prometheus are running, configure Grafana to look for Prometheus\\non it's default port: https://localhost:9090 (unless you customized it).\"), mdx(\"p\", null, \"Hit \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Save & Test\"), \" to ensure that you have the data source set correctly. Now you can configure a new dashboard!\"), mdx(\"h4\", null, \"Template Grafana Dashboard\"), mdx(\"p\", null, \"If you would like a basic dashboard to start \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/assets/tutorials/node-metrics/substrate-node-template-metrics.json\"\n  }, \"here is a template example\"), \" that you can \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Import\"), \"\\nin Grafana to get basic information about your node:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1006px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"84.33333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACYElEQVQ4y31Ty27VMBDNlrb3Nh57xo/4HefmcZMWihASYsGmS+A34P9/ADmpSsUC6ejoeDzWjOfYzfOqtVI+ZOvCAdM550KIWWmDUjMQN7enm9vTu5u7A7d35wONMYqBACG5kCQ7qTqpO5KGCwkcWxAMxOnMGEfgdOB8D6czO53bRprIOKE0jJOLuYzLfN186hknjoqjItWhNLlMl3kdl3WYrqSsIA1CNjbkFgRHidK0QD++f/796/np49RCjdSOUNUthtPX+ennU9gyHFucGuMiAxS1SK0/zeO8jNY7EMRRgqC9CEltw9CnqdgYgZMgxTg2w7QK0oiGAZG0zg+dzVxo4BK44kKTsgzIuhzCEPzgXM9AAtctoyaXmSOZ7OyQuj502fkp2T7YEm0J0nXUGe0dGhO3PH6ZTe+VsyZ61LpxoXCSaStx7ePap63i0P3jJczZjdHN0c0pPvTpsYQ1hyXFrdfJNrlMXEikjgv1FsCl83kYry70u5Fqv4h8TWgBm9SPDBClOSw58KKVqeNQe3CPvOaQ6pigRnehZbwm1agWpA/9Hz4E49RwrEO3IaN8KSKkJnVw9w+/dHFU5tTsD0Dspqsd8g3vEOqvPpb7nffDZM730PlQtrG/DpfHOS9lfL+kVz4ij3O/Xi4PY7mWmrZdAKkhZe5bUMaGUnzOaRh8znEo2jkbo3LOpqictSkZ7/1l9vPm5jVsH0Ca5tunrCQCKuei9cn67EM2NrwawwTB3iQDBDSovVBOKF8/xjgtWKfXQU2SICTjqIwb520Yl1JxLeNiXDw+Ca+e12fPAP8AwDRp/bbVkgwAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Grafana Dashboard\",\n    \"title\": \"Grafana Dashboard\",\n    \"src\": \"/static/f4aae612289e5ff65808bda59045d500/2c5fd/grafana.png\",\n    \"srcSet\": [\"/static/f4aae612289e5ff65808bda59045d500/5a46d/grafana.png 300w\", \"/static/f4aae612289e5ff65808bda59045d500/0a47e/grafana.png 600w\", \"/static/f4aae612289e5ff65808bda59045d500/2c5fd/grafana.png 1006w\"],\n    \"sizes\": \"(max-width: 1006px) 100vw, 1006px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"If you create your own,\\nthe \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://prometheus.io/docs/visualization/grafana/\"\n  }, \"prometheus docs for Grafana\"), \" may be helpful.\"), mdx(\"p\", null, \"If you do create one, consider uploading it to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://grafana.com/grafana/dashboards\"\n  }, \"community list of\\ndashboards\"), \" and letting the Substrate\\nbuilder community know it exists by listing in on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/substrate-developer-hub/awesome-substrate\"\n  }, \"Awesome\\nSubstrate\"), \"! Here\\nis ours on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://grafana.com/grafana/dashboards/13759/\"\n  }, \"the grafana public\\ndashboards\")), mdx(\"h2\", {\n    \"id\": \"next-steps\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#next-steps\",\n    \"aria-label\": \"next steps permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Next Steps\"), mdx(\"p\", null, \"Continue learning more:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Learn how to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/tutorials/v3/private-network\"\n  }, \"set up a private Substrate network\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Further configuration, notification services, and permanent installation of\\n\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://wiki.polkadot.network/docs/en/maintain-guides-how-to-monitor-your-node\"\n  }, \"Substrate/Polkadot monitoring tools\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Visit the source code for\\n\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/paritytech/substrate/tree/master/utils/prometheus\"\n  }, \"Substrate Prometheus Exporter\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"See the \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/rustdocs/latest/prometheus/index.html\"\n  }, \"docs for Prometheus in Substrate\"), \".\")), mdx(\"p\", null, \"Have a look at some node visualization examples:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The Grafana dashboard configuration for the \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/w3f/polkadot-dashboard\"\n  }, \"Polkadot\\nnetwork\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://grafana.com/grafana/dashboards/13759/\"\n  }, \"Grafana Template\"), \" for a Substrate Node Template.\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#introduction","title":"Introduction"},{"url":"#what-you-will-be-doing","title":"What you will be doing"},{"url":"#learning-outcomes","title":"Learning outcomes"},{"url":"#install-prometheus-and-grafana","title":"Install Prometheus and Grafana"},{"url":"#start-a-substrate-template-node","title":"Start a Substrate Template Node","items":[{"url":"#configure-prometheus-to-scrape-your-substrate-node","title":"Configure Prometheus to scrape your Substrate node"},{"url":"#check-all-prometheus-metrics","title":"Check All Prometheus Metrics"}]},{"url":"#visualizing-prometheus-metrics-with-grafana","title":"Visualizing Prometheus Metrics with Grafana"},{"url":"#next-steps","title":"Next Steps"}]},"fileAbsolutePath":"/Users/a212/Desktop/substrate-docs/v3/tutorials/06-node-metrics/index.mdx"}},"pageContext":{"slug":"/tutorials/v3/node-metrics","version":"3.0","navMenuSlug":"nodeMetrics","locale":"en","hrefLang":"en-US","originalPath":"/tutorials/v3/node-metrics/","dateFormat":"MM/DD/YYYY"}},
    "staticQueryHashes": ["1239077767","1821483254","2966362950","3280999885"]}