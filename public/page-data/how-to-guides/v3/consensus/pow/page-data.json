{
    "componentChunkName": "component---src-templates-htg-template-tsx",
    "path": "/how-to-guides/v3/consensus/pow/",
    "result": {"data":{"mdx":{"frontmatter":{"slug":"/how-to-guides/v3/consensus/pow","title":"Configure a Chain to POW Consensus","hideNav":null,"difficulty":2,"section":"how to guides","category":"consensus"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Configure a Chain to POW Consensus\",\n  \"slug\": \"/how-to-guides/v3/consensus/pow\",\n  \"keywords\": \"node, client, consensus, proof-of-work\",\n  \"version\": 3,\n  \"section\": \"how to guides\",\n  \"category\": \"consensus\",\n  \"difficulty\": 2\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Objectives = makeShortcode(\"Objectives\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(Objectives, {\n    data: [{\n      title: 'Goal',\n      description: 'To understand how link a POW consensus engine to a service client.'\n    }, {\n      title: 'Use Cases',\n      description: \"- Launching a POW chain.\\n- Upgrading a chain from Authority based to POW based.\"\n    }, {\n      title: 'Overview',\n      description: \"The basic-pow node demonstrates how to wire up a custom consensus engine into the Substrate Service. \\n        It uses a minimal proof of work consensus engine to reach agreement over the blockchain. This guide will \\n        teach us many useful aspects of dealing with consensus and prepare us to understand more advanced consensus \\n        engines in the future.\\n        \"\n    }],\n    mdxType: \"Objectives\"\n  }), mdx(\"h2\", {\n    \"id\": \"steps\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#steps\",\n    \"aria-label\": \"steps permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Steps\"), mdx(\"h3\", {\n    \"id\": \"1-make-a-function-that-defines-a-full-node-using-sc_consensus_pow-and-sc_service\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#1-make-a-function-that-defines-a-full-node-using-sc_consensus_pow-and-sc_service\",\n    \"aria-label\": \"1 make a function that defines a full node using sc_consensus_pow and sc_service permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"1. Make a function that defines a full node using \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"sc_consensus_pow\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"sc_service\")), mdx(\"p\", null, \"In \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/service.rs\"), \", make a function called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"new_full1\"), \" that defines \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/rustdocs/latest/sc_service/struct.PartialComponents.html\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"PartialComponents\")), \" and\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/rustdocs/latest/sc_consensus_pow/struct.PowBlockImport.html\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"PowBlockImport\")), \" :\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-rust\"\n  }, \"let pow_block_import = sc_consensus_pow::PowBlockImport::new(\\n    client.clone(),\\n    client.clone(),\\n    sha3pow::MinimalSha3Algorithm,\\n    0,                              // check inherents starting at block 0\\n    select_chain.clone(),\\n    inherent_data_providers.clone(),\\n    can_author_with,\\n);\\n\\nlet import_queue = sc_consensus_pow::import_queue(\\n    Box::new(pow_block_import.clone()),\\n    None,\\n    sha3pow::MinimalSha3Algorithm,  // provide it with references to our client\\n    inherent_data_providers.clone(),\\n    &task_manager.spawn_handle(),\\n    config.prometheus_registry(),\\n)?;\\n\")), mdx(\"p\", null, \"See the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/rustdocs/latest/sc_consensus_pow/struct.PowBlockImport.html#method.new_full\"\n  }, \"Rust docs\"), \" on to configure the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pow_block_import\"), \" function.\"), mdx(\"h3\", {\n    \"id\": \"2-create-import-queue\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#2-create-import-queue\",\n    \"aria-label\": \"2 create import queue permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"2. Create import queue\"), mdx(\"p\", null, \"Define your node's \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/v3/concepts/extrinsics#inherents\"\n  }, \"inherents\"), \" by using \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/rustdocs/latest/sp_inherents/struct.InherentDataProviders.html\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"InherentDataProviders\")), \" in a function that defines the providers of your POW system:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-rust\"\n  }, \"pub fn build_inherent_data_providers() -> Result<InherentDataProviders, ServiceError> {\\n    let providers = InherentDataProviders::new();\\n\\n    providers\\n        .register_provider(sp_timestamp::InherentDataProvider)\\n        .map_err(Into::into)\\n        .map_err(sp_consensus::error::Error::InherentData)?;\\n\\n    Ok(providers)\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"3-define-the-proposer-and-worker\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#3-define-the-proposer-and-worker\",\n    \"aria-label\": \"3 define the proposer and worker permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"3. Define the \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"proposer\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"worker\")), mdx(\"p\", null, \"In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"new_full\"), \" function, define \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"proposer\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-rust\"\n  }, \"let proposer = sc_basic_authorship::ProposerFactory::new(\\n    task_manager.spawn_handle(),\\n    client.clone(),\\n    transaction_pool,\\n    prometheus_registry.as_ref(),\\n);\\n\\nlet (_worker, worker_task) = sc_consensus_pow::start_mining_worker(\\n    Box::new(pow_block_import),\\n    client,\\n    select_chain,\\n    MinimalSha3Algorithm,\\n    proposer,\\n    network.clone(),\\n    None,\\n    inherent_data_providers,\\n    // time to wait for a new block before starting to mine a new one\\n    Duration::from_secs(10),\\n    // how long to take to actually build the block (i.e. executing extrinsics)\\n    Duration::from_secs(10),\\n    can_author_with,\\n);\\n\")), mdx(\"p\", null, \"Let the task manager spawn it:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-rust\"\n  }, \"task_manager\\n    .spawn_essential_handle()\\n    .spawn_blocking(\\\"pow\\\", worker_task);\\n\")), mdx(\"h3\", {\n    \"id\": \"4-construct-the-light-clients-service\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#4-construct-the-light-clients-service\",\n    \"aria-label\": \"4 construct the light clients service permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"4. Construct the light client's service\"), mdx(\"p\", null, \"The construction of the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.parity.io/what-is-a-light-client/\"\n  }, \"light client\"), \" service is quite similar to the construction of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"new_full\"), \" function.\\nFollow the pattern from the previous step to create \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"new_light\"), \".\"), mdx(\"h2\", {\n    \"id\": \"examples\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#examples\",\n    \"aria-label\": \"examples permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Examples\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/substrate-developer-hub/substrate-how-to-guides/tree/main/example-code/consensus-nodes/POW\"\n  }, \"Basic POW example node\"))), mdx(\"h2\", {\n    \"id\": \"resources\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#resources\",\n    \"aria-label\": \"resources permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Resources\"), mdx(\"h4\", null, \"Rust docs\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/rustdocs/latest/sc_consensus_pow/trait.PowAlgorithm.html\"\n  }, \"POW Algorithm\"), \" trait\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/rustdocs/latest/sc_consensus_pow/struct.PowBlockImport.html\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"PowBlockimport\")))), mdx(\"h4\", null, \"Docs\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/v3/concepts/extrinsics#inherents\"\n  }, \"Inherents\"))));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#steps","title":"Steps","items":[{"url":"#1-make-a-function-that-defines-a-full-node-using-sc_consensus_pow-and-sc_service","title":"1. Make a function that defines a full node using sc_consensus_pow and sc_service"},{"url":"#2-create-import-queue","title":"2. Create import queue"},{"url":"#3-define-the-proposer-and-worker","title":"3. Define the proposer and worker"},{"url":"#4-construct-the-light-clients-service","title":"4. Construct the light client's service"}]},{"url":"#examples","title":"Examples"},{"url":"#resources","title":"Resources"}]},"fileAbsolutePath":"/Users/a212/Desktop/substrate-docs/v3/how-to-guides/06-consensus/a-pow/index.mdx"}},"pageContext":{"slug":"/how-to-guides/v3/consensus/pow","version":"3.0","locale":"en","hrefLang":"en-US","originalPath":"/how-to-guides/v3/consensus/pow/","dateFormat":"MM/DD/YYYY"}},
    "staticQueryHashes": ["1239077767","1821483254","2966362950","3280999885"]}