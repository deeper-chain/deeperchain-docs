{
    "componentChunkName": "component---src-templates-kb-template-tsx",
    "path": "/v3/concepts/off-chain-features/",
    "result": {"data":{"mdx":{"frontmatter":{"slug":"/v3/concepts/off-chain-features","title":"Off-Chain Features","hideNav":null,"section":"docs","category":"concepts"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Off-Chain Features\",\n  \"slug\": \"/v3/concepts/off-chain-features\",\n  \"version\": 3,\n  \"section\": \"docs\",\n  \"category\": \"concepts\",\n  \"keywords\": \"off-chain, off-chain storage, oracles, ocw\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"There is often a need to query and/or process off-chain data before it can be included in the\\non-chain state. The conventional way of doing this is through oracles. Oracles are external services\\nthat typically listen to blockchain events and trigger tasks accordingly. When these tasks complete,\\ntheir results are submitted back to the blockchain using transactions. While this approach works, it\\nstill has several flaws with respect to security, scalability, and infrastructure efficiency.\"), mdx(\"p\", null, \"To make the off-chain data integration secure and more efficient, Substrate provides off-chain\\nfeatures:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Off-Chain Worker (OCW)\"), \" subsystem allows execution of long-running and possibly non-\\ndeterministic tasks (e.g. web requests, encryption/decryption and signing of data, random number\\ngeneration, CPU-intensive computations, enumeration/aggregation of on-chain data, etc.) that could\\notherwise require longer than the block execution time.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Off-Chain Storage\"), \" offers storage that is local to a Substrate node that can be accessed both\\nby off-chain workers (both read and write access) and on-chain logic (write access via off-chain\\nindexing but not read access). This is great for different worker threads to communicate to each\\nothers and for storing user- / node-specific data that does not require consensus over the whole\\nnetwork.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Off-Chain Indexing\"), \" allows the runtime, if opted-in, to write directly to the off-chain storage\\nindependently from OCWs. This serves as a local/temporary storage for on-chain logic and\\ncomplement to its on-chain state.\"))), mdx(\"p\", null, \"Off-chain features run in their own Wasm execution environment outside of the Substrate runtime.\\nThis separation of concerns makes sure that block production is not impacted by long-running\\noff-chain tasks. However, as the off-chain features are declared in the same code as the runtime,\\nthey can easily access on-chain state for their computations.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjUlEQVQoz3VT2W6DMBDk/78p39A8pIqUpxA1IRyGgAHf9lS7rRFV1JVWNgszew0FAKSUkE/nHKy17HT33m9OzzlGZwhhw2Uv9g9ICUIINE3DPk0Tx2OM7NliCIghctJ9MUyInRFIKbVVSRVQNYEIvUfftGifNaLzQIhw2iD+EmYrCKy1ZiARGmM2IjK6E8gbi7qu0XTtBs6EhBnHkYsohmHA5XLhVsm6roMQPXohcL1eIeWMvu9hlhVIQPQBzlgk67HKmTHn8xmHwwHLsqAoryWOH0e8Xi/OIOXEGed55hlSjBLW9wfGTuBZPfldMg5KzjyesixxOn0yrqCKpJTcGr38r2X4ADNK6GmGXRTSauCU5vkOfY9xnPjbYk9CW6Kl0D07SyZ4JOcxtQL38obuWSOsmmeYdkt52zIZzZSGX1UVHo8Hj4KlYx1kK1DdvqDlAhgPq/QfDfKW9wFymtvPYgSflIAqpJaXYWTZmFUBLmyEbzrcB0lC+Y/IeqSYVoqlE63nVu2q4KzNvW4VfgOtOFe/LfdvRAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Off-chain Workers\",\n    \"title\": \"Off-chain Workers\",\n    \"src\": \"/static/505c4ec510929c01c0e608225c5c598a/c1b63/off-chain-workers-v2.png\",\n    \"srcSet\": [\"/static/505c4ec510929c01c0e608225c5c598a/5a46d/off-chain-workers-v2.png 300w\", \"/static/505c4ec510929c01c0e608225c5c598a/0a47e/off-chain-workers-v2.png 600w\", \"/static/505c4ec510929c01c0e608225c5c598a/c1b63/off-chain-workers-v2.png 1200w\", \"/static/505c4ec510929c01c0e608225c5c598a/6edca/off-chain-workers-v2.png 1351w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"h2\", {\n    \"id\": \"off-chain-workers\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#off-chain-workers\",\n    \"aria-label\": \"off chain workers permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Off-chain workers\"), mdx(\"p\", null, \"Off-chain workers have access to extended APIs for communicating with the external world:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Ability to\\n\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/rustdocs/latest/sp_runtime/offchain/trait.TransactionPool.html\"\n  }, \"submit transactions\"), \"\\n(either signed or unsigned) to the chain to publish computation results \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#example-txs\"\n  }, \"[1]\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A fully-featured HTTP client allowing the worker to access and fetch data from external services \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#example-http\"\n  }, \"[2]\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Access to the local keystore to sign and verify statements or transactions.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"An additional, local\\n\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/rustdocs/latest/sp_runtime/offchain/trait.OffchainStorage.html\"\n  }, \"key-value database\"), \"\\nshared between all off-chain workers \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#example-off-chain-storage\"\n  }, \"[3]\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A secure, local entropy source for random number generation.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Access to the node's precise\\n\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/rustdocs/latest/sp_runtime/offchain/struct.Timestamp.html\"\n  }, \"local time\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The ability to sleep and resume work.\")), mdx(\"p\", null, \"OCWs can be initiated from within a special function in your runtime implementation,\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/rustdocs/latest/frame_support/traits/trait.OffchainWorker.html\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"fn offchain_worker(block: T::BlockNumber)\")), \".\\ncommunicate results back to the chain, off-chain workers can submit signed or unsigned transactions\\nto be included in subsequent blocks.\"), mdx(\"p\", null, \"Note that the results from off-chain workers are not subject to regular transaction verification. A\\nverification mechanism (e.g. voting, averaging, checking sender signatures, or simply \\\"trusting\\\")\\nshould be implemented to determine what information gets into the chain.\"), mdx(\"h2\", {\n    \"id\": \"off-chain-storage\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#off-chain-storage\",\n    \"aria-label\": \"off chain storage permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Off-chain storage\"), mdx(\"p\", null, \"As its name indicated, the storage is not stored on-chain. It can be accessed by off-chain worker\\nthreads (both read and write access) and on-chain logic (write only, refer to off-chain indexing\\nbelow). This storage is not populated among the blockchain network and does not need to have\\nconsensus computation over it.\"), mdx(\"p\", null, \"As an off-chain worker thread is being spawned off during each block import, there could be more\\nthan one off-chain worker thread running at any given time. So, similar to any multi-threaded\\nprogramming environment, there are also utilities to\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://en.wikipedia.org/wiki/Lock_(computer_science)\"\n  }, \"mutex lock\"), \" the storage when accessing\\nthem for data consistency.\"), mdx(\"p\", null, \"Off-chain storage serves as a bridge for various off-chain worker threads to communicate to each\\nothers and between off-chain and on-chain logics. It can also be read using remote procedure calls\\n(RPC) so it fits the use case of storing indefinitely growing data without over-consuming the\\non-chain storage.\"), mdx(\"h2\", {\n    \"id\": \"off-chain-indexing\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#off-chain-indexing\",\n    \"aria-label\": \"off chain indexing permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Off-chain indexing\"), mdx(\"p\", null, \"Storage in the context of blockchain is mostly about on-chain state. But it is expensive (as it is\\npopulated to each node in the network) and not recommended for historical or user-generated data\\nwhich grow indefinitely over time.\"), mdx(\"p\", null, \"We have off-chain storage for this purpose. In addition of being accessible by OCWs, Substrate also\\nincludes a feature called \\\"off-chain indexing\\\" allowing the runtime to write directly to the\\noff-chain storage independently from OCWs. Nodes have to opt-in for persistency of this data via\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--enable-offchain-indexing\"), \" flag when starting up the Substrate node.\"), mdx(\"p\", null, \"Unlike OCWs, which are not executed during initial blockchain synchronization, off-chain indexing is\\npopulating the storage every time a block is processed, so the data is always consistent and will be\\nexactly the same for every node with indexing enabled.\"), mdx(\"h2\", {\n    \"id\": \"learn-more\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#learn-more\",\n    \"aria-label\": \"learn more permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"className\": \"fill-current text-substrateDark dark:text-white\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Learn more\"), mdx(\"p\", null, \"To look at concrete examples of off-chain workers and how to use them in runtime development,\\nrefer to the following sections in Substrate Recipes:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/substrate-developer-hub/recipes/blob/master/text/off-chain-workers/transactions.html\"\n  }, \"Submit signed and unsigned transactions from off-chain workers back on-chain\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/substrate-developer-hub/recipes/blob/master/text/off-chain-workers/http-json.html\"\n  }, \"Fetch external data using HTTP requests and parse JSON responses\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/substrate-developer-hub/recipes/blob/master/text/off-chain-workers/storage.html\"\n  }, \"Store result in off-chain worker local storage\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/substrate-developer-hub/recipes/blob/master/text/off-chain-workers/indexing.html\"\n  }, \"Example of off-chain indexing\"))));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#off-chain-workers","title":"Off-chain workers"},{"url":"#off-chain-storage","title":"Off-chain storage"},{"url":"#off-chain-indexing","title":"Off-chain indexing"},{"url":"#learn-more","title":"Learn more"}]},"fileAbsolutePath":"/Users/a212/Desktop/substrate-docs/v3/docs/02-concepts/h-off-chain-features/index.mdx"}},"pageContext":{"slug":"/v3/concepts/off-chain-features","version":"3.0","locale":"en","hrefLang":"en-US","originalPath":"/v3/concepts/off-chain-features/","dateFormat":"MM/DD/YYYY"}},
    "staticQueryHashes": ["1239077767","1821483254","2966362950","3280999885"]}